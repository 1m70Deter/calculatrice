<!DOCTYPE html>
<html>
    <head>
        <title>Calculatrice GUI</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="css/index.css">
    </head>
    <body>
        <header>
            <div class="binaryBox">
                <p id="binaryP" style="flex: 1;"></p>
                <span style="display : flex; justify-content: flex-end;">
                    <p id="hexP"></p>
                    <p id="heightP"></p>
                </span>
            </div>
            <div class="history"></div>
            <h1 id="result">
              $$0$$
            </h1>
        </header>
        <section id=smallCalc style="display: none;">
            <article>
                <div style="width: 20%; display: flex; justify-content: center; align-items: center;">
                    <button class="cButton" onclick="delAll()" style="background: rgb(202, 111, 26); width: 50px; height: 50px; border-radius: 200px;">C</button>
                </div>
                <button onclick="delWord()">Del</button>
                <button>%</button>
                <button>/</button>
                <button>(</button>
            </article>
            <article>
                <button>7</button>
                <button>8</button>
                <button>9</button>
                <button>*</button>
                <button>)</button>
            </article>
            <article>
                <button>4</button>
                <button>5</button>
                <button>6</button>
                <button>-</button>
                <button>10<sup>x</sup></button>
            </article>
            <article>
                <button>1</button>
                <button>2</button>
                <button>3</button>
                <button>+</button>
                <button>π</button>
            </article>
            <article>
                <button onclick="options()">Opt</button>
                <button>0</button>
                <button>.</button>
                <button onclick="equal()">=</button>
                <button>ans</button>
            </article>
        </section>
        <section id="largeCalc">
            <article>
                <div style="width: 15%; display: flex; justify-content: center; align-items: center;">
                    <button class="cButton" onclick="delAll()" style="background: rgb(202, 111, 26); width: 45px; height: 45px; border-radius: 200px;">C</button>
                </div>
                <button onclick="delWord()">Del</button>
                <button title="This is a modulo sign... Not a percent...">%</button>
                <button>/</button>
                <button>(</button>
                <button id="moreBtn" onclick="moreFunctions()" style="width: 30%;">More</button>
            </article>
            <article>
                <button>7</button>
                <button>8</button>
                <button>9</button>
                <button>*</button>
                <button>)</button>
                <button type="button" name="button" style="width: 30%;" id="funcButton">Functions</button>
            </article>
            <article>
                <button>4</button>
                <button>5</button>
                <button>6</button>
                <button>-</button>
                <button>10<sup>x</sup></button>
                <button type="button" name="button" style="width: 30%;" id="statButton">Statistics</button>
            </article>
            <article>
                <button>1</button>
                <button>2</button>
                <button>3</button>
                <button>+</button>
                <button>π</button>
                <button type="button" name="button" style="width: 30%;" id="convButton">Conversion</button>
            </article>
            <article>
                <button onclick="options()">Opt</button>
                <button>0</button>
                <button>.</button>
                <button onclick="equal()">=</button>
                <button type="button" name="button">ans</button>
                <button type="button" name="button" style="width: 30%;" id="probaButton">Probability</button>
            </article>
        </section>
        <article class="moreAction" style="height: 0px; transition: 300ms; overflow: hidden; overflow-x: auto;">
            <button type="button" name="button">Calculus</button>
            <button type="button" name="button">Complex</button>
            <button type="button" name="button">Decimal</button>
            <button type="button" name="button">Matrix</button>
            <button type="button" name="button">Logic</button>
            <button type="button" name="button">Arithmetic</button>
            <button type="button" name="button">Trigo</button>
        </article>
        <article class="Calculus submenu" style="display: none;">
            <aside class="submenu-aside">
                <button title="range(min, max, [pas]) : generate a list of numbers between [min; max[">range()</button>
                <button title="sum(f, xval:list, [yval:list], [zval:list]) : return the sum of a function evalued with values in xval">sum()</button>
                <button title="prod(f, xval:list, [yval:list], [zval:list]) : return the product of a function evalued with values in xval">prod()</button>
            </aside>
            <aside class="submenu-aside">
                <button title="ln(x) : neperian logarithm of x">ln()</button>
                <button title="log(x) : decimal logarithm of x">log()</button>
                <button>abs()</button>
            </aside>
            <aside class="submenu-aside">
                <button title="root(x, [n=2]) : return the n root of x">root()</button>
            </aside>
        </article>
        <article class="Complex submenu" style="display: none;">

        </article>
        <article class="Decimal submenu" style="display: none;">
            <aside class="submenu-aside">
                <button type="button" name="button" title="ceil(x) : return x as an integrer, but greater">ceil</button>
                <button type="button" name="button" title="round(x, dec) : return x with a length of dec integrer">round</button>
                <button type="button" name="button" title="floor(x) : return x as an integrer, but lower">floor</button>
            </aside>
            <aside class="submenu-aside">

            </aside>
        </article>
        <article class="Matrix submenu" style="display: none;">
            <button title="dot(u, v, [a]) : return the scalar product of two vectors. [a] can be an angle, if specified, u and v are numbers and not lists">dot()</button>
        </article>
        <article class="Logic submenu" style="display: none;">
            <aside class="submenu-aside">
                <button title="NOT(a, b)">NOT</button>
                <button title="OR(a, b)">OR</button>
                <button title="AND(a, b)">AND</button>
            </aside>
            <aside class="submenu-aside">
                <button title="NOR(a, b)">NOR</button>
                <button title="XOR(a, b)">XOR</button>
                <button title="NAND(a, b)">NAND</button>
            </aside>
            <aside class="submenu-aside">
                <button title="Enable Binary options" onclick="binaryBox()">Binary</button>
            </aside>
        </article>
        <article class="Arithmetic submenu" style="display: none;">
            <aside class="submenu-aside">
                <button title="gcd(n1, n2) : return the gcd of two numbers">gcd()</button>
                <button title="lcm(n1, n2) : return the lcm of two numbers">lcm()</button>
                <button title="factor(x) : return the number as a product of factor">factor()</button>
            </aside>
        </article>
        <article class="Trigo submenu" style="display: none;">
            <aside class="submenu-aside">
                <button title="sin(θ) : return the sinus of θ">sin()</button>
                <button title="cos(θ) : return the cosinus of θ">cos()</button>
                <button title="tan(θ) : return the tan of θ">tan()</button>
            </aside>
            <aside class="submenu-aside">
                <button>sin<sup>-1</sup>()</button>
                <button>cos<sup>-1</sup>()</button>
                <button>tan<sup>-1</sup>()</button>
            </aside>
        </article>
        <article class="keyboardAction" style="display: none;">
            <button onclick="options()">Opt</button>
            <div id="modeBox">
                <button onclick="//modifyWriteMode('line')" style="background: white; color: #111;">Line</button>
                <button onclick="//modifyWriteMode('natural')" style="display: none;">Natural</button><!-- comming soon... Maybe... If it's not just a project for the school ! -->
            </div>
        </article>
    </body>
    <div class="optScreenParent">
        <div class="optScreen">
            <div class="optHeader">
                <div id="closeOpt" onclick="options()">
                    <span class="line1"></span>
                    <span class="line2"></span>
                </div>
                <h3>Menu</h3>
            </div>
            <div class="optMain">
                <p id="trueCalc">More Options</p>
                <p onclick="keyboardMode()">Keyboard Mode</p>
                <span><input type="checkbox" id="showTitleDiv" value=""><label for="showTitleDiv"> Show the Title when hover button</label></span>
            </div>
        </div>
    </div>
    <div class="errorScreen">
        <h3>An error occured !</h3>
        <p class="errorText"></p>
    </div>
    <div class="copyMenu" style="display: none;">
        <button onclick="copyResult()">Copy</button>
        <button onclick="pasteSentence()">Paste</button>
    </div>
    <div class="toast" style="bottom: -100px;">
        <p></p>
    </div>
    <p class="titleDiv" style="display: none;"></p>
</html>
<script src="js/affichage.js"></script>
<script src="js/algebre.js"></script>
<script src="js/vecteur.js"></script>
<script src="js/fonction.js"></script>
<script src="js/pgm-mode.js"></script>
<script src="js/kbd-affichage.js"></script>
<script id="MathJax-script" async src="asset/mathjax.js"></script>
<script>
MathJax = {
    options: {
        enableMenu: false
    }
};
</script>
<script>
    if(typeof pywebview == "undefined") {
        var isOveredTitle = false, isOveredButton = false;
        for(var i = 0; i < document.getElementsByTagName("button").length; i++) {
            if(document.getElementsByTagName("button")[i].title != "") {
                document.getElementsByTagName("button")[i].name = document.getElementsByTagName("button")[i].title;
                document.getElementsByTagName("button")[i].title = "";
                document.getElementsByTagName("button")[i].onmousemove = function (e) {
                    if(document.getElementById("showTitleDiv").checked == false) {
                        return false;
                    }
                    isOveredButton = true;
                    document.getElementsByClassName("titleDiv")[0].textContent = e.path[0].name;
                    document.getElementsByClassName("titleDiv")[0].style = "left: " + e.clientX.toString() + "px; top: " + (e.clientY - document.getElementsByClassName("titleDiv")[0].offsetHeight - 30).toString() + "px;";
                    if(e.clientX + document.getElementsByClassName("titleDiv")[0].offsetWidth > document.getElementsByTagName("html")[0].offsetWidth) {
                        document.getElementsByClassName("titleDiv")[0].style.left = (document.getElementsByTagName("html")[0].offsetWidth - document.getElementsByClassName("titleDiv")[0].offsetWidth).toString() + "px";
                    }
                    document.getElementsByClassName("titleDiv")[0].style.display = "flex";
                }
                document.getElementsByTagName("button")[i].onmouseleave = function() {
                    isOveredButton = false;
                    window.setTimeout(function() {
                        if(isOveredTitle == false && isOveredButton == false) {
                            document.getElementsByClassName("titleDiv")[0].style.top = (Number(document.getElementsByClassName("titleDiv")[0].style.top.split("px")[0]) - 6000).toString() + "px";
                            document.getElementsByClassName("titleDiv")[0].style.display = "none";
                        }
                    }, 10);
                }
            }
        }
    }
    document.getElementsByClassName("titleDiv")[0].onmouseover = function() {
        isOveredTitle = true;
    }
    document.getElementsByClassName("titleDiv")[0].onmouseleave = function() {
        isOveredTitle = false;
        window.setTimeout(function() {
            if(isOveredButton == false) {
                document.getElementsByClassName("titleDiv")[0].style.display = "none";
            }
        }, 10)
    }
    // RGB mode
    var isActivatedRgb = false, timerRgb;
    function rgb() {
        if(isActivatedRgb == true) {
            isActivatedRgb = false;
            clearInterval(timerRgb);
        } else {
            isActivatedRgb = true;
            window.setInterval(function() {
                var color = "#" + toHex(Math.floor(Math.random() * 150)+100) + toHex(Math.floor(Math.random() * 150)+100) + toHex(Math.floor(Math.random() * 150)+100);
                for(var j = 0; j < 2; j++) {
                    for(var i = 0; i < document.getElementsByTagName("section")[j].getElementsByTagName("button").length; i++) {
                        if(document.getElementsByTagName("section")[j].getElementsByTagName("button")[i].textContent != "C") {
                            document.getElementsByTagName("section")[j].getElementsByTagName("button")[i].style = "transition: 300ms; border: solid 1px " + color + ";";
                        }
                    }
                }
            }, 300);
        }
    }
    var efneaiof = "ent"
</script>
